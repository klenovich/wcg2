{"ast":null,"code":"var _jsxFileName = \"/Users/lucasklenovich/Documents/GitHub/wcg2/tsu/src/components/selections.component.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { AppContext } from \"../App\";\nimport Select from \"react-select\";\nimport { countries } from \"../data/countries\";\nimport { IN_PROCESS } from \"../constants\";\nimport { getDistance, convertDistance, getCompassDirection } from \"geolib\";\nimport createShareableResult from \"../utils/createShareableResult\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Selections = () => {\n  _s();\n\n  const {\n    todayCountry,\n    numGuesses,\n    setNumGuesses,\n    selectedCountries,\n    setSelectedCountries,\n    game,\n    setCookie,\n    random\n  } = useContext(AppContext);\n  const [country, setCountry] = useState({\n    value: \"\",\n    label: \"\",\n    latitude: 0,\n    longitude: 0,\n    distance: 0,\n    direction: \"\"\n  });\n  const todayCountryPos = {\n    latitude: todayCountry.latitude,\n    longitude: todayCountry.longitude\n  };\n\n  const handleSubmit = () => {\n    if (country.value !== undefined && country.value !== null && country.value !== \"\") {\n      const selectedCountryPos = {\n        latitude: country === null || country === void 0 ? void 0 : country.latitude,\n        longitude: country === null || country === void 0 ? void 0 : country.longitude\n      };\n      const distance = convertDistance(getDistance(todayCountryPos, selectedCountryPos, 1000), \"km\");\n      const direction = getCompassDirection(selectedCountryPos, todayCountryPos);\n      let newCountries = selectedCountries;\n      country.direction = direction;\n      country.distance = distance;\n      newCountries[numGuesses] = country;\n      setSelectedCountries(newCountries);\n      setCookie(random.toString(), JSON.stringify(newCountries), {\n        maxAge: 86400\n      });\n      setCountry({});\n      setNumGuesses(numGuesses + 1);\n    } else {\n      var element = document.getElementById(\"input-box\");\n      element === null || element === void 0 ? void 0 : element.classList.add(\"error\");\n      setTimeout(() => {\n        element === null || element === void 0 ? void 0 : element.classList.remove(\"error\");\n      }, 300);\n    }\n  };\n\n  const handleShare = () => {\n    createShareableResult(selectedCountries, game, numGuesses);\n    var element = document.getElementById(\"shareButtonTooltip\");\n    element === null || element === void 0 ? void 0 : element.classList.remove(\"invisible\");\n    element === null || element === void 0 ? void 0 : element.classList.remove(\"opacity-0\");\n    setTimeout(() => {\n      element === null || element === void 0 ? void 0 : element.classList.add(\"invisible\");\n      element === null || element === void 0 ? void 0 : element.classList.add(\"opacity-0\");\n    }, 1500);\n  };\n\n  const theme = theme => ({ ...theme,\n    colors: { ...theme.colors,\n      text: \"white\",\n      primary50: \"rgba(100, 116, 139, 0.1)\",\n      primary25: \"rgba(100, 116, 139, 0.2)\",\n      primary: \"rgba(100, 116, 139, 0.3)\"\n    }\n  });\n\n  const customStyles = {\n    control: base => ({ ...base,\n      background: \"transparent\",\n      border: \"2px solid white\",\n      \"&:focus, :hover\": {\n        border: \"2px solid white\"\n      }\n    }),\n    singleValue: (base, _) => ({ ...base,\n      color: \"white\"\n    }),\n    input: base => ({ ...base,\n      color: \"white\"\n    }),\n    option: base => ({ ...base,\n      \"&:hover\": {\n        fontWeight: \"500\"\n      }\n    })\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-sm md:text-base\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-evenly items-center max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg m-auto my-5 px-5\",\n      children: /*#__PURE__*/_jsxDEV(Select, {\n        id: \"input-box\",\n        isDisabled: game === IN_PROCESS ? false : true,\n        options: countries,\n        value: country,\n        onInputChange: (_, action) => {\n          if (action.action === \"input-change\") setCountry({});\n        },\n        onChange: country => setCountry(country),\n        onKeyDown: e => {\n          if (e.key === \"Enter\" && country.value !== undefined && country.value !== \"\") {\n            handleSubmit();\n          }\n\n          if (e.key === \"Backspace\") {\n            setCountry({});\n          }\n        },\n        menuPlacement: \"top\",\n        className: \"w-full rounded shadow-md hover:shadow-gray-400 duration-200\",\n        theme: theme,\n        styles: customStyles\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), game === IN_PROCESS ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      className: \"flex justify-center items-center w-40 m-auto p-2 my-5 font-light bg-white bg-opacity-90 hover:bg-opacity-100 rounded shadow hover:shadow-md transform duration-200 ease-in-out\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"shareButtonTooltip\",\n        className: \"fixed top-5 left-1/2 -translate-x-1/2 z-10 opacity-0 invisible transform duration-200 ease-in-out\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center items-center w-80 md:w-96 p-5 text-sm md:text-base bg-slate-200 text-white rounded-lg backdrop-blur-md bg-opacity-20 shadow-md\",\n          children: \"Copied results to clipboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleShare,\n        className: \"flex justify-center items-center w-40 m-auto p-2 my-5 font-light bg-white bg-opacity-90 hover:bg-opacity-100 rounded shadow hover:shadow-md transform duration-200 ease-in-out\",\n        children: \"Share\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Selections, \"NCLvLNPnqJENvGPYMmyxyk4Fu5Y=\");\n\n_c = Selections;\nexport default Selections;\n\nvar _c;\n\n$RefreshReg$(_c, \"Selections\");","map":{"version":3,"names":["useState","useContext","AppContext","Select","countries","IN_PROCESS","getDistance","convertDistance","getCompassDirection","createShareableResult","Selections","todayCountry","numGuesses","setNumGuesses","selectedCountries","setSelectedCountries","game","setCookie","random","country","setCountry","value","label","latitude","longitude","distance","direction","todayCountryPos","handleSubmit","undefined","selectedCountryPos","newCountries","toString","JSON","stringify","maxAge","element","document","getElementById","classList","add","setTimeout","remove","handleShare","theme","colors","text","primary50","primary25","primary","customStyles","control","base","background","border","singleValue","_","color","input","option","fontWeight","action","e","key"],"sources":["/Users/lucasklenovich/Documents/GitHub/wcg2/tsu/src/components/selections.component.tsx"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { AppContext } from \"../App\";\nimport Select from \"react-select\";\nimport { countries } from \"../data/countries\";\nimport { CountryType } from \"../interfaces\";\nimport { IN_PROCESS } from \"../constants\";\nimport { getDistance, convertDistance, getCompassDirection } from \"geolib\";\nimport createShareableResult from \"../utils/createShareableResult\";\n\nconst Selections = () => {\n  const {\n    todayCountry,\n    numGuesses,\n    setNumGuesses,\n    selectedCountries,\n    setSelectedCountries,\n    game,\n    setCookie,\n    random,\n  } = useContext(AppContext);\n  const [country, setCountry] = useState<CountryType>({\n    value: \"\",\n    label: \"\",\n    latitude: 0,\n    longitude: 0,\n    distance: 0,\n    direction: \"\",\n  });\n\n  const todayCountryPos = {\n    latitude: todayCountry.latitude,\n    longitude: todayCountry.longitude,\n  };\n\n  const handleSubmit = () => {\n    if (\n      country.value !== undefined &&\n      country.value !== null &&\n      country.value !== \"\"\n    ) {\n      const selectedCountryPos = {\n        latitude: country?.latitude,\n        longitude: country?.longitude,\n      };\n      const distance = convertDistance(\n        getDistance(todayCountryPos, selectedCountryPos, 1000),\n        \"km\"\n      );\n      const direction = getCompassDirection(\n        selectedCountryPos,\n        todayCountryPos\n      );\n      let newCountries = selectedCountries;\n      country.direction = direction;\n      country.distance = distance;\n      newCountries[numGuesses] = country;\n      setSelectedCountries(newCountries);\n\n      setCookie(random.toString() as string, JSON.stringify(newCountries), {\n        maxAge: 86400,\n      });\n\n      setCountry({} as CountryType);\n      setNumGuesses(numGuesses + 1);\n    } else {\n      var element = document.getElementById(\"input-box\");\n      element?.classList.add(\"error\");\n      setTimeout(() => {\n        element?.classList.remove(\"error\");\n      }, 300);\n    }\n  };\n\n  const handleShare = () => {\n    createShareableResult(selectedCountries, game, numGuesses);\n    var element = document.getElementById(\"shareButtonTooltip\");\n    element?.classList.remove(\"invisible\");\n    element?.classList.remove(\"opacity-0\");\n    setTimeout(() => {\n      element?.classList.add(\"invisible\");\n      element?.classList.add(\"opacity-0\");\n    }, 1500);\n  };\n\n  const theme = (theme: any) => ({\n    ...theme,\n    colors: {\n      ...theme.colors,\n      text: \"white\",\n      primary50: \"rgba(100, 116, 139, 0.1)\",\n      primary25: \"rgba(100, 116, 139, 0.2)\",\n      primary: \"rgba(100, 116, 139, 0.3)\",\n    },\n  });\n\n  const customStyles = {\n    control: (base: any) => ({\n      ...base,\n      background: \"transparent\",\n      border: \"2px solid white\",\n      \"&:focus, :hover\": {\n        border: \"2px solid white\",\n      },\n    }),\n    singleValue: (base: any, _: any) => ({\n      ...base,\n      color: \"white\",\n    }),\n    input: (base: any) => ({\n      ...base,\n      color: \"white\",\n    }),\n    option: (base: any) => ({\n      ...base,\n      \"&:hover\": {\n        fontWeight: \"500\",\n      },\n    }),\n  };\n\n  return (\n    <div className=\"text-sm md:text-base\">\n      <div className=\"flex justify-evenly items-center max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg m-auto my-5 px-5\">\n        <Select\n          id=\"input-box\"\n          isDisabled={game === IN_PROCESS ? false : true}\n          options={countries}\n          value={country}\n          onInputChange={(_, action) => {\n            if (action.action === \"input-change\") setCountry({} as CountryType);\n          }}\n          onChange={(country) => setCountry(country as CountryType)}\n          onKeyDown={(e) => {\n            if (\n              e.key === \"Enter\" &&\n              country.value !== undefined &&\n              country.value !== \"\"\n            ) {\n              handleSubmit();\n            }\n            if (e.key === \"Backspace\") {\n              setCountry({} as CountryType);\n            }\n          }}\n          menuPlacement=\"top\"\n          className=\"w-full rounded shadow-md hover:shadow-gray-400 duration-200\"\n          theme={theme}\n          styles={customStyles}\n        />\n      </div>\n      {game === IN_PROCESS ? (\n        <button\n          onClick={handleSubmit}\n          className=\"flex justify-center items-center w-40 m-auto p-2 my-5 font-light bg-white bg-opacity-90 hover:bg-opacity-100 rounded shadow hover:shadow-md transform duration-200 ease-in-out\"\n        >\n          Submit\n        </button>\n      ) : (\n        <>\n          <div\n            id=\"shareButtonTooltip\"\n            className=\"fixed top-5 left-1/2 -translate-x-1/2 z-10 opacity-0 invisible transform duration-200 ease-in-out\"\n          >\n            <div className=\"flex justify-center items-center w-80 md:w-96 p-5 text-sm md:text-base bg-slate-200 text-white rounded-lg backdrop-blur-md bg-opacity-20 shadow-md\">\n              Copied results to clipboard\n            </div>\n          </div>\n          <button\n            onClick={handleShare}\n            className=\"flex justify-center items-center w-40 m-auto p-2 my-5 font-light bg-white bg-opacity-90 hover:bg-opacity-100 rounded shadow hover:shadow-md transform duration-200 ease-in-out\"\n          >\n            Share\n          </button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Selections;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}