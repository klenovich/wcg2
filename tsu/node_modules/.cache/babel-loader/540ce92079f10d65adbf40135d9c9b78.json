{"ast":null,"code":"import _slicedToArray from\"/Users/lucasklenovich/Documents/GitHub/wcg2/tsu/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext,useRef}from\"react\";import{IN_PROCESS,FINISHED_WIN,FINISHED_LOSE}from\"../constants\";import{AppContext}from\"../App\";import Modal from\"./modal.component\";import{useClickOutside}from\"../utils/useClickOutside\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Result=function Result(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var ref=useRef(null);useClickOutside(ref,function(){return setOpen(false);});var _useContext=useContext(AppContext),todayCountry=_useContext.todayCountry,numGuesses=_useContext.numGuesses,selectedCountries=_useContext.selectedCountries,setGame=_useContext.setGame,game=_useContext.game;useEffect(function(){var _selectedCountries,_selectedCountries2,_selectedCountries3;if(numGuesses===6&&((_selectedCountries=selectedCountries[numGuesses-1])===null||_selectedCountries===void 0?void 0:_selectedCountries.value)!==todayCountry.value){setGame(FINISHED_LOSE);setOpen(true);}else if(((_selectedCountries2=selectedCountries[numGuesses-1])===null||_selectedCountries2===void 0?void 0:_selectedCountries2.value)!==undefined&&((_selectedCountries3=selectedCountries[numGuesses-1])===null||_selectedCountries3===void 0?void 0:_selectedCountries3.value)===todayCountry.value){setGame(FINISHED_WIN);setOpen(true);}},[numGuesses,game,setGame,selectedCountries,todayCountry]);var message=function message(){return game===FINISHED_WIN?numGuesses===1?/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 text-sm md:text-base\",children:[\"You got it on the\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-base md:text-xl italic\",children:\"first\"}),\" try!\"]}):numGuesses===6?/*#__PURE__*/_jsx(\"div\",{className:\"p-5 text-sm md:text-base\",children:\"Oof, that was close.\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 text-sm md:text-base\",children:[\"You got it in\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-base md:text-xl italic\",children:[numGuesses,\" \"]}),\"guesses.\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 text-sm md:text-base text-center\",children:[\"You didn't get it, the country is\",/*#__PURE__*/_jsxs(\"div\",{className:\"text-base md:text-xl italic\",children:[todayCountry.label,\".\"]})]});};return/*#__PURE__*/_jsx(\"div\",{ref:ref,children:game===IN_PROCESS?null:/*#__PURE__*/_jsx(Modal,{setOpen:setOpen,open:open,id:\"modal-result\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full text-center\",children:message()})})});};export default Result;","map":{"version":3,"names":["useState","useEffect","useContext","useRef","IN_PROCESS","FINISHED_WIN","FINISHED_LOSE","AppContext","Modal","useClickOutside","Result","open","setOpen","ref","todayCountry","numGuesses","selectedCountries","setGame","game","value","undefined","message","label"],"sources":["/Users/lucasklenovich/Documents/GitHub/wcg2/tsu/src/components/result.component.tsx"],"sourcesContent":["import { useState, useEffect, useContext, useRef } from \"react\";\nimport { IN_PROCESS, FINISHED_WIN, FINISHED_LOSE } from \"../constants\";\nimport { AppContext } from \"../App\";\nimport Modal from \"./modal.component\";\nimport { useClickOutside } from \"../utils/useClickOutside\";\n\nconst Result = () => {\n  const [open, setOpen] = useState<boolean>(false);\n  const ref = useRef<HTMLDivElement>(null);\n  useClickOutside(ref, () => setOpen(false));\n  const { todayCountry, numGuesses, selectedCountries, setGame, game } =\n    useContext(AppContext);\n\n  useEffect(() => {\n    if (\n      numGuesses === 6 &&\n      selectedCountries[numGuesses - 1]?.value !== todayCountry.value\n    ) {\n      setGame(FINISHED_LOSE);\n      setOpen(true);\n    } else if (\n      selectedCountries[numGuesses - 1]?.value !== undefined &&\n      selectedCountries[numGuesses - 1]?.value === todayCountry.value\n    ) {\n      setGame(FINISHED_WIN);\n      setOpen(true);\n    }\n  }, [numGuesses, game, setGame, selectedCountries, todayCountry]);\n\n  const message = () => {\n    return game === FINISHED_WIN ? (\n      numGuesses === 1 ? (\n        <div className=\"p-5 text-sm md:text-base\">\n          You got it on the{\" \"}\n          <span className=\"text-base md:text-xl italic\">first</span> try!\n        </div>\n      ) : numGuesses === 6 ? (\n        <div className=\"p-5 text-sm md:text-base\">Oof, that was close.</div>\n      ) : (\n        <div className=\"p-5 text-sm md:text-base\">\n          You got it in{\" \"}\n          <span className=\"text-base md:text-xl italic\">{numGuesses} </span>\n          guesses.\n        </div>\n      )\n    ) : (\n      <div className=\"p-5 text-sm md:text-base text-center\">\n        You didn't get it, the country is\n        <div className=\"text-base md:text-xl italic\">{todayCountry.label}.</div>\n      </div>\n    );\n  };\n\n  return (\n    <div ref={ref}>\n      {game === IN_PROCESS ? null : (\n        <Modal setOpen={setOpen} open={open} id=\"modal-result\">\n          <div className=\"w-full text-center\">{message()}</div>\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default Result;\n"],"mappings":"qIAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,CAA0CC,MAA1C,KAAwD,OAAxD,CACA,OAASC,UAAT,CAAqBC,YAArB,CAAmCC,aAAnC,KAAwD,cAAxD,CACA,OAASC,UAAT,KAA2B,QAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,OAASC,eAAT,KAAgC,0BAAhC,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,cAAwBV,QAAQ,CAAU,KAAV,CAAhC,wCAAOW,IAAP,eAAaC,OAAb,eACA,GAAMC,CAAAA,GAAG,CAAGV,MAAM,CAAiB,IAAjB,CAAlB,CACAM,eAAe,CAACI,GAAD,CAAM,iBAAMD,CAAAA,OAAO,CAAC,KAAD,CAAb,EAAN,CAAf,CACA,gBACEV,UAAU,CAACK,UAAD,CADZ,CAAQO,YAAR,aAAQA,YAAR,CAAsBC,UAAtB,aAAsBA,UAAtB,CAAkCC,iBAAlC,aAAkCA,iBAAlC,CAAqDC,OAArD,aAAqDA,OAArD,CAA8DC,IAA9D,aAA8DA,IAA9D,CAGAjB,SAAS,CAAC,UAAM,gEACd,GACEc,UAAU,GAAK,CAAf,EACA,qBAAAC,iBAAiB,CAACD,UAAU,CAAG,CAAd,CAAjB,gEAAmCI,KAAnC,IAA6CL,YAAY,CAACK,KAF5D,CAGE,CACAF,OAAO,CAACX,aAAD,CAAP,CACAM,OAAO,CAAC,IAAD,CAAP,CACD,CAND,IAMO,IACL,sBAAAI,iBAAiB,CAACD,UAAU,CAAG,CAAd,CAAjB,kEAAmCI,KAAnC,IAA6CC,SAA7C,EACA,sBAAAJ,iBAAiB,CAACD,UAAU,CAAG,CAAd,CAAjB,kEAAmCI,KAAnC,IAA6CL,YAAY,CAACK,KAFrD,CAGL,CACAF,OAAO,CAACZ,YAAD,CAAP,CACAO,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CAdQ,CAcN,CAACG,UAAD,CAAaG,IAAb,CAAmBD,OAAnB,CAA4BD,iBAA5B,CAA+CF,YAA/C,CAdM,CAAT,CAgBA,GAAMO,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,MAAOH,CAAAA,IAAI,GAAKb,YAAT,CACLU,UAAU,GAAK,CAAf,cACE,aAAK,SAAS,CAAC,0BAAf,+BACoB,GADpB,cAEE,aAAM,SAAS,CAAC,6BAAhB,mBAFF,WADF,CAKIA,UAAU,GAAK,CAAf,cACF,YAAK,SAAS,CAAC,0BAAf,kCADE,cAGF,aAAK,SAAS,CAAC,0BAAf,2BACgB,GADhB,cAEE,cAAM,SAAS,CAAC,6BAAhB,WAA+CA,UAA/C,OAFF,cATG,cAgBL,aAAK,SAAS,CAAC,sCAAf,4DAEE,aAAK,SAAS,CAAC,6BAAf,WAA8CD,YAAY,CAACQ,KAA3D,OAFF,GAhBF,CAqBD,CAtBD,CAwBA,mBACE,YAAK,GAAG,CAAET,GAAV,UACGK,IAAI,GAAKd,UAAT,CAAsB,IAAtB,cACC,KAAC,KAAD,EAAO,OAAO,CAAEQ,OAAhB,CAAyB,IAAI,CAAED,IAA/B,CAAqC,EAAE,CAAC,cAAxC,uBACE,YAAK,SAAS,CAAC,oBAAf,UAAqCU,OAAO,EAA5C,EADF,EAFJ,EADF,CASD,CAxDD,CA0DA,cAAeX,CAAAA,MAAf"},"metadata":{},"sourceType":"module"}