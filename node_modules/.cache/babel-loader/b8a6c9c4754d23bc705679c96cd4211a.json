{"ast":null,"code":"import _asyncToGenerator from\"/Users/lucasklenovich/Documents/GitHub/wcg2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/lucasklenovich/Documents/GitHub/wcg2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/lucasklenovich/Documents/GitHub/wcg2/node_modules/@babel/runtime/regenerator/index.js\";import{useState,useEffect,useContext}from\"react\";import getTodaySeed from\"./getTodaySeed\";import{AppContext}from\"../App\";import{countries}from\"../data/countries\";import{IN_PROCESS}from\"../constants\";var useToday=function useToday(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),countrySvg=_useState2[0],setCountrySvg=_useState2[1];var _useContext=useContext(AppContext),setTodayCountry=_useContext.setTodayCountry,numGuesses=_useContext.numGuesses,game=_useContext.game;var random=getTodaySeed();var index=Math.floor(random*countries.length);var todayCountry=countries[index];useEffect(function(){var dynamicImport=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var shape,flag,countrySvg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return import(\"../data/countries-shape-svg/\".concat(todayCountry.value.toLowerCase(),\"/vector.svg\"));case 2:shape=_context.sent;_context.next=5;return import(\"../data/countries-flag-svg/\".concat(todayCountry.value.toLowerCase(),\".svg\"));case 5:flag=_context.sent;countrySvg={shape:shape.default,flag:flag.default};setCountrySvg(countrySvg);setTodayCountry(todayCountry);case 9:case\"end\":return _context.stop();}}},_callee);}));return function dynamicImport(){return _ref.apply(this,arguments);};}();if(numGuesses===0&&game===IN_PROCESS){dynamicImport();}return function(){};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[numGuesses,game]);return countrySvg;};export default useToday;","map":{"version":3,"names":["useState","useEffect","useContext","getTodaySeed","AppContext","countries","IN_PROCESS","useToday","countrySvg","setCountrySvg","setTodayCountry","numGuesses","game","random","index","Math","floor","length","todayCountry","dynamicImport","value","toLowerCase","shape","flag","default"],"sources":["/Users/lucasklenovich/Documents/GitHub/wcg2/src/utils/useToday.ts"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport getTodaySeed from \"./getTodaySeed\";\nimport { AppContext } from \"../App\";\nimport { countries } from \"../data/countries\";\nimport { IN_PROCESS } from \"../constants\";\n\nconst useToday = () => {\n  const [countrySvg, setCountrySvg] = useState<any>();\n  const { setTodayCountry, numGuesses, game } = useContext(AppContext);\n  const random = getTodaySeed();\n  const index = Math.floor(random * countries.length);\n  const todayCountry = countries[index];\n  useEffect(() => {\n    const dynamicImport = async () => {\n      const shape = await import(\n        `../data/countries-shape-svg/${todayCountry.value.toLowerCase()}/vector.svg`\n      );\n      const flag = await import(\n        `../data/countries-flag-svg/${todayCountry.value.toLowerCase()}.svg`\n      );\n      const countrySvg = { shape: shape.default, flag: flag.default };\n      setCountrySvg(countrySvg);\n      setTodayCountry(todayCountry);\n    };\n\n    if (numGuesses === 0 && game === IN_PROCESS) {\n      dynamicImport();\n    }\n\n    return () => {};\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [numGuesses, game]);\n\n  return countrySvg;\n};\n\nexport default useToday;\n"],"mappings":"sYAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,OAASC,UAAT,KAA2B,QAA3B,CACA,OAASC,SAAT,KAA0B,mBAA1B,CACA,OAASC,UAAT,KAA2B,cAA3B,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,cAAoCP,QAAQ,EAA5C,wCAAOQ,UAAP,eAAmBC,aAAnB,eACA,gBAA8CP,UAAU,CAACE,UAAD,CAAxD,CAAQM,eAAR,aAAQA,eAAR,CAAyBC,UAAzB,aAAyBA,UAAzB,CAAqCC,IAArC,aAAqCA,IAArC,CACA,GAAMC,CAAAA,MAAM,CAAGV,YAAY,EAA3B,CACA,GAAMW,CAAAA,KAAK,CAAGC,IAAI,CAACC,KAAL,CAAWH,MAAM,CAAGR,SAAS,CAACY,MAA9B,CAAd,CACA,GAAMC,CAAAA,YAAY,CAAGb,SAAS,CAACS,KAAD,CAA9B,CACAb,SAAS,CAAC,UAAM,CACd,GAAMkB,CAAAA,aAAa,0FAAG,mLACA,8CACaD,YAAY,CAACE,KAAb,CAAmBC,WAAnB,EADb,gBADA,QACdC,KADc,qCAID,6CACaJ,YAAY,CAACE,KAAb,CAAmBC,WAAnB,EADb,SAJC,QAIdE,IAJc,eAOdf,UAPc,CAOD,CAAEc,KAAK,CAAEA,KAAK,CAACE,OAAf,CAAwBD,IAAI,CAAEA,IAAI,CAACC,OAAnC,CAPC,CAQpBf,aAAa,CAACD,UAAD,CAAb,CACAE,eAAe,CAACQ,YAAD,CAAf,CAToB,sDAAH,kBAAbC,CAAAA,aAAa,0CAAnB,CAYA,GAAIR,UAAU,GAAK,CAAf,EAAoBC,IAAI,GAAKN,UAAjC,CAA6C,CAC3Ca,aAAa,GACd,CAED,MAAO,WAAM,CAAE,CAAf,CACA;AACD,CAnBQ,CAmBN,CAACR,UAAD,CAAaC,IAAb,CAnBM,CAAT,CAqBA,MAAOJ,CAAAA,UAAP,CACD,CA5BD,CA8BA,cAAeD,CAAAA,QAAf"},"metadata":{},"sourceType":"module"}