{"ast":null,"code":"import _objectSpread from\"/Users/lucasklenovich/Documents/GitHub/wcg2/tsu/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/lucasklenovich/Documents/GitHub/wcg2/tsu/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from\"react\";import{AppContext}from\"../App\";import Select from\"react-select\";import{countries}from\"../data/countries\";import{IN_PROCESS}from\"../constants\";import{getDistance,convertDistance,getCompassDirection}from\"geolib\";import createShareableResult from\"../utils/createShareableResult\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Selections=function Selections(){var _useContext=useContext(AppContext),todayCountry=_useContext.todayCountry,numGuesses=_useContext.numGuesses,setNumGuesses=_useContext.setNumGuesses,selectedCountries=_useContext.selectedCountries,setSelectedCountries=_useContext.setSelectedCountries,game=_useContext.game,setCookie=_useContext.setCookie,random=_useContext.random;var _useState=useState({value:\"\",label:\"\",latitude:0,longitude:0,distance:0,direction:\"\"}),_useState2=_slicedToArray(_useState,2),country=_useState2[0],setCountry=_useState2[1];var todayCountryPos={latitude:todayCountry.latitude,longitude:todayCountry.longitude};var handleSubmit=function handleSubmit(){if(country.value!==undefined&&country.value!==null&&country.value!==\"\"){var selectedCountryPos={latitude:country===null||country===void 0?void 0:country.latitude,longitude:country===null||country===void 0?void 0:country.longitude};var distance=convertDistance(getDistance(todayCountryPos,selectedCountryPos,1000),\"km\");var direction=getCompassDirection(selectedCountryPos,todayCountryPos);var newCountries=selectedCountries;country.direction=direction;country.distance=distance;newCountries[numGuesses]=country;setSelectedCountries(newCountries);setCookie(random.toString(),JSON.stringify(newCountries),{maxAge:86400});setCountry({});setNumGuesses(numGuesses+1);}else{var element=document.getElementById(\"input-box\");element===null||element===void 0?void 0:element.classList.add(\"error\");setTimeout(function(){element===null||element===void 0?void 0:element.classList.remove(\"error\");},300);}};var handleShare=function handleShare(){createShareableResult(selectedCountries,game,numGuesses);var element=document.getElementById(\"shareButtonTooltip\");element===null||element===void 0?void 0:element.classList.remove(\"invisible\");element===null||element===void 0?void 0:element.classList.remove(\"opacity-0\");setTimeout(function(){element===null||element===void 0?void 0:element.classList.add(\"invisible\");element===null||element===void 0?void 0:element.classList.add(\"opacity-0\");},1500);};var theme=function theme(_theme){return _objectSpread(_objectSpread({},_theme),{},{colors:_objectSpread(_objectSpread({},_theme.colors),{},{text:\"white\",primary50:\"rgba(100, 116, 139, 0.1)\",primary25:\"rgba(100, 116, 139, 0.2)\",primary:\"rgba(100, 116, 139, 0.3)\"})});};var customStyles={control:function control(base){return _objectSpread(_objectSpread({},base),{},{background:\"transparent\",border:\"2px solid white\",\"&:focus, :hover\":{border:\"2px solid white\"}});},singleValue:function singleValue(base,_){return _objectSpread(_objectSpread({},base),{},{color:\"white\"});},input:function input(base){return _objectSpread(_objectSpread({},base),{},{color:\"white\"});},option:function option(base){return _objectSpread(_objectSpread({},base),{},{\"&:hover\":{fontWeight:\"500\"}});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm md:text-base\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-evenly items-center max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg m-auto my-5 px-5\",children:/*#__PURE__*/_jsx(Select,{id:\"input-box\",isDisabled:game===IN_PROCESS?false:true,options:countries,value:country,onInputChange:function onInputChange(_,action){if(action.action===\"input-change\")setCountry({});},onChange:function onChange(country){return setCountry(country);},onKeyDown:function onKeyDown(e){if(e.key===\"Enter\"&&country.value!==undefined&&country.value!==\"\"){handleSubmit();}if(e.key===\"Backspace\"){setCountry({});}},menuPlacement:\"top\",className:\"w-full rounded shadow-md hover:shadow-gray-400 duration-200\",theme:theme,styles:customStyles})}),game===IN_PROCESS?/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex justify-center items-center w-40 m-auto p-2 my-5 font-light bg-white bg-opacity-90 hover:bg-opacity-100 rounded shadow hover:shadow-md transform duration-200 ease-in-out\",children:\"Submit\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"shareButtonTooltip\",className:\"fixed top-5 left-1/2 -translate-x-1/2 z-10 opacity-0 invisible transform duration-200 ease-in-out\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center w-80 md:w-96 p-5 text-sm md:text-base bg-slate-200 text-white rounded-lg backdrop-blur-md bg-opacity-20 shadow-md\",children:\"Copied results to clipboard\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleShare,className:\"flex justify-center items-center w-40 m-auto p-2 my-5 font-light bg-white bg-opacity-90 hover:bg-opacity-100 rounded shadow hover:shadow-md transform duration-200 ease-in-out\",children:\"Share\"})]})]});};export default Selections;","map":{"version":3,"names":["useState","useContext","AppContext","Select","countries","IN_PROCESS","getDistance","convertDistance","getCompassDirection","createShareableResult","Selections","todayCountry","numGuesses","setNumGuesses","selectedCountries","setSelectedCountries","game","setCookie","random","value","label","latitude","longitude","distance","direction","country","setCountry","todayCountryPos","handleSubmit","undefined","selectedCountryPos","newCountries","toString","JSON","stringify","maxAge","element","document","getElementById","classList","add","setTimeout","remove","handleShare","theme","colors","text","primary50","primary25","primary","customStyles","control","base","background","border","singleValue","_","color","input","option","fontWeight","action","e","key"],"sources":["/Users/lucasklenovich/Documents/GitHub/wcg2/tsu/src/components/selections.component.tsx"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { AppContext } from \"../App\";\nimport Select from \"react-select\";\nimport { countries } from \"../data/countries\";\nimport { CountryType } from \"../interfaces\";\nimport { IN_PROCESS } from \"../constants\";\nimport { getDistance, convertDistance, getCompassDirection } from \"geolib\";\nimport createShareableResult from \"../utils/createShareableResult\";\n\nconst Selections = () => {\n  const {\n    todayCountry,\n    numGuesses,\n    setNumGuesses,\n    selectedCountries,\n    setSelectedCountries,\n    game,\n    setCookie,\n    random,\n  } = useContext(AppContext);\n  const [country, setCountry] = useState<CountryType>({\n    value: \"\",\n    label: \"\",\n    latitude: 0,\n    longitude: 0,\n    distance: 0,\n    direction: \"\",\n  });\n\n  const todayCountryPos = {\n    latitude: todayCountry.latitude,\n    longitude: todayCountry.longitude,\n  };\n\n  const handleSubmit = () => {\n    if (\n      country.value !== undefined &&\n      country.value !== null &&\n      country.value !== \"\"\n    ) {\n      const selectedCountryPos = {\n        latitude: country?.latitude,\n        longitude: country?.longitude,\n      };\n      const distance = convertDistance(\n        getDistance(todayCountryPos, selectedCountryPos, 1000),\n        \"km\"\n      );\n      const direction = getCompassDirection(\n        selectedCountryPos,\n        todayCountryPos\n      );\n      let newCountries = selectedCountries;\n      country.direction = direction;\n      country.distance = distance;\n      newCountries[numGuesses] = country;\n      setSelectedCountries(newCountries);\n\n      setCookie(random.toString() as string, JSON.stringify(newCountries), {\n        maxAge: 86400,\n      });\n\n      setCountry({} as CountryType);\n      setNumGuesses(numGuesses + 1);\n    } else {\n      var element = document.getElementById(\"input-box\");\n      element?.classList.add(\"error\");\n      setTimeout(() => {\n        element?.classList.remove(\"error\");\n      }, 300);\n    }\n  };\n\n  const handleShare = () => {\n    createShareableResult(selectedCountries, game, numGuesses);\n    var element = document.getElementById(\"shareButtonTooltip\");\n    element?.classList.remove(\"invisible\");\n    element?.classList.remove(\"opacity-0\");\n    setTimeout(() => {\n      element?.classList.add(\"invisible\");\n      element?.classList.add(\"opacity-0\");\n    }, 1500);\n  };\n\n  const theme = (theme: any) => ({\n    ...theme,\n    colors: {\n      ...theme.colors,\n      text: \"white\",\n      primary50: \"rgba(100, 116, 139, 0.1)\",\n      primary25: \"rgba(100, 116, 139, 0.2)\",\n      primary: \"rgba(100, 116, 139, 0.3)\",\n    },\n  });\n\n  const customStyles = {\n    control: (base: any) => ({\n      ...base,\n      background: \"transparent\",\n      border: \"2px solid white\",\n      \"&:focus, :hover\": {\n        border: \"2px solid white\",\n      },\n    }),\n    singleValue: (base: any, _: any) => ({\n      ...base,\n      color: \"white\",\n    }),\n    input: (base: any) => ({\n      ...base,\n      color: \"white\",\n    }),\n    option: (base: any) => ({\n      ...base,\n      \"&:hover\": {\n        fontWeight: \"500\",\n      },\n    }),\n  };\n\n  return (\n    <div className=\"text-sm md:text-base\">\n      <div className=\"flex justify-evenly items-center max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg m-auto my-5 px-5\">\n        <Select\n          id=\"input-box\"\n          isDisabled={game === IN_PROCESS ? false : true}\n          options={countries}\n          value={country}\n          onInputChange={(_, action) => {\n            if (action.action === \"input-change\") setCountry({} as CountryType);\n          }}\n          onChange={(country) => setCountry(country as CountryType)}\n          onKeyDown={(e) => {\n            if (\n              e.key === \"Enter\" &&\n              country.value !== undefined &&\n              country.value !== \"\"\n            ) {\n              handleSubmit();\n            }\n            if (e.key === \"Backspace\") {\n              setCountry({} as CountryType);\n            }\n          }}\n          menuPlacement=\"top\"\n          className=\"w-full rounded shadow-md hover:shadow-gray-400 duration-200\"\n          theme={theme}\n          styles={customStyles}\n        />\n      </div>\n      {game === IN_PROCESS ? (\n        <button\n          onClick={handleSubmit}\n          className=\"flex justify-center items-center w-40 m-auto p-2 my-5 font-light bg-white bg-opacity-90 hover:bg-opacity-100 rounded shadow hover:shadow-md transform duration-200 ease-in-out\"\n        >\n          Submit\n        </button>\n      ) : (\n        <>\n          <div\n            id=\"shareButtonTooltip\"\n            className=\"fixed top-5 left-1/2 -translate-x-1/2 z-10 opacity-0 invisible transform duration-200 ease-in-out\"\n          >\n            <div className=\"flex justify-center items-center w-80 md:w-96 p-5 text-sm md:text-base bg-slate-200 text-white rounded-lg backdrop-blur-md bg-opacity-20 shadow-md\">\n              Copied results to clipboard\n            </div>\n          </div>\n          <button\n            onClick={handleShare}\n            className=\"flex justify-center items-center w-40 m-auto p-2 my-5 font-light bg-white bg-opacity-90 hover:bg-opacity-100 rounded shadow hover:shadow-md transform duration-200 ease-in-out\"\n          >\n            Share\n          </button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Selections;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}